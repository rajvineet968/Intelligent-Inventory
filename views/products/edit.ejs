<%- layout("layouts/boilerplate.ejs") %>

    <div class="container mt-4">
        <h2>Edit Product</h2>

        <form action="/products/<%= product.ProductID %>?_method=PUT" method="POST" enctype="multipart/form-data">

            <div class="mb-3">
                <label>Stock Code</label>
                <input name="stockcode" value="<%= product.StockCode %>" class="form-control" required>
            </div>

            <div class="mb-3">
                <label>Description</label>
                <textarea name="description" class="form-control" required><%= product.Description %></textarea>
            </div>

            <div class="mb-3">
                <label>Unit Price</label>
                <input name="unit_price" type="number" step="0.01" value="<%= product.Unit_Price %>"
                    class="form-control" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Quantity (Stock)</label>
                <input type="number" name="quantity" class="form-control" min="0" value="<%= product.Quantity %>"
                    required>
            </div>

            <div class="mb-3">
                <label class="form-label">Category</label>
                <select name="catid" class="form-select" required>
                    <% categories.forEach(cat=> { %>
                        <option value="<%= cat.CategoryID %>" <%=cat.CategoryID===product.CatID ? "selected" : "" %>
                            >
                            <%= cat.Name %>
                        </option>
                        <% }) %>
                </select>
            </div>

            <div class="mb-3">
                <label>Update Image (optional)</label>
                <input name="image" type="file" class="form-control">
            </div>

            <button class="btn btn-success">Update</button>
        </form>
    </div>